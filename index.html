<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Waitlist Capacity Simulator</title>

  <!-- Google Font: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="container">

    <header>
      <div>
        <h1>Waitlist Capacity Simulator</h1>
        <p class="sub">
          Scenario modelling demo (synthetic). Not clinical advice. No patient data.
        </p>
      </div>
    </header>

    <!-- ================= ANALYSIS ZONE ================= -->
    <section class="analysis">

      <!-- INPUT CONTROLS -->
      <section class="card grid">
        <div>
          <label>Avg referrals per day</label>
          <input id="arrivalRate" type="number" step="0.1" value="18" />
        </div>

        <div>
          <label>Appointments per day (capacity)</label>
          <input id="capacityPerDay" type="number" step="1" value="16" />
        </div>

        <div>
          <label>DNA rate (%)</label>
          <input id="dnaRate" type="number" step="1" value="12" />
        </div>

        <div>
          <label>DNA rebook rate (%)</label>
          <input id="rebookRate" type="number" step="1" value="70" />
        </div>

        <div>
          <label>Rebook delay (days)</label>
          <input id="rebookDelay" type="number" step="1" value="7" />
        </div>

        <div>
          <label>Simulation horizon (days)</label>
          <input id="days" type="number" step="1" value="180" />
        </div>

        <div>
          <label>Warm-up (days)</label>
          <input id="warmup" type="number" step="1" value="14" />
        </div>

        <div>
          <label>Random seed</label>
          <input id="seed" type="number" step="1" value="42" />
        </div>

        <div>
          <label>£ cost per WTE per year</label>
          <input id="wteCostAnnual" type="number" step="1000" value="55000" />
        </div>

        <div>
          <label>Extra slots/day per +1 WTE</label>
          <input id="slotsPerWTE" type="number" step="1" value="2" />
        </div>

        <div class="full">
          <button id="runBtn">Run simulation</button>
          <button id="exampleBtn" class="secondary">Load example scenarios</button>
        </div>
      </section>

      <!-- ASSUMPTIONS PANEL -->
      <section class="card">
        <h2>Assumptions</h2>
        <p class="sub">Auto-generated from current inputs (for transparency and reporting).</p>
        <div id="assumptionsPanel" class="assumptions"></div>
      </section>

      <!-- SCENARIOS -->
      <section class="card">
        <h2>Example scenarios</h2>
        <p class="sub">Auto-fill inputs and run comparable scenarios.</p>

        <div class="scenario-row">
          <button id="scenarioBaseline" class="secondary">Baseline</button>
          <button id="scenarioAddCapacity" class="secondary">+2 slots/day</button>
          <button id="scenarioReduceDNA" class="secondary">Reduce DNA</button>
          <button id="scenarioAddWTE" class="secondary">+1 WTE</button>
          <button id="scenarioCompareBtn">Run all & compare</button>
          <button id="exportCsvBtn" class="secondary" disabled>Export CSV</button>
        </div>

        <div id="scenarioCompare" class="compare"></div>
      </section>

      <!-- METRICS -->
      <section class="card">
        <h2>Key metrics</h2>
        <div id="metrics" class="metrics"></div>
      </section>

      <!-- CHARTS -->
      <section class="card">
        <h2>Queue size over time</h2>
        <canvas id="queueChart" height="120"></canvas>
      </section>

      <section class="card">
        <h2>Wait time distribution (days)</h2>
        <canvas id="waitChart" height="120"></canvas>
      </section>

    </section>
    <!-- =============== END ANALYSIS ZONE =============== -->

    <!-- ================= CONTEXT ZONE ================= -->
    <section class="card context">
      <h2>What this simulator does</h2>
      <p>
        This tool models how a healthcare waitlist evolves over time based on demand,
        appointment capacity, and non-attendance (DNA) behaviour.
      </p>
      <p>
        It is designed for service planning, policy analysis, and scenario testing.
        All calculations use synthetic data only.
      </p>
    </section>

    <section class="card context">
      <h2>How the model works</h2>
      <ul>
        <li>Daily referrals follow a stochastic arrival process.</li>
        <li>Capacity is fixed per day and represents staffing constraints.</li>
        <li>DNAs may re-enter the system after a delay.</li>
        <li>Attended patients exit the queue and generate waiting-time data.</li>
      </ul>
    </section>

    <section class="card context">
      <h2>Interpreting outputs</h2>
      <ul>
        <li>Flat queues indicate a stable system.</li>
        <li>Growing queues indicate demand &gt; capacity.</li>
        <li>Cost per week saved reflects marginal workforce efficiency.</li>
      </ul>
    </section>

    <footer>
      Built by Shounak • waitlist-simulator • v1
    </footer>

  </div>

  <script src="app.js"></script>
</body>
</html>
